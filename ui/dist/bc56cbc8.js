import{i as e,_ as t,s as r,y as o,e as i}from"./48895b41.js";import{e as s}from"./270e41ec.js";import{D as n}from"./be3b922f.js";import{s as l}from"./1596eb10.js";var a;let d=a=class extends r{constructor(){super(),this.serial="",this.type="",this.addEventListener("drop",this.handleDrop),this.addEventListener("drag",this.handleDragOver),this.addEventListener("dragenter",a.handleDragEnter),this.addEventListener("dragleave",a.handleDragLeave),this.addEventListener("dragover",this.handleDragOver)}static handleDragEnter(e){e.preventDefault()}static handleDragLeave(e){e.preventDefault()}slottedDropZone(){var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("slot");return null==t?void 0:t.assignedElements({flatten:!0})[0]}handleDrop(e){var t,r,o,i;e.preventDefault();const s=this.slottedDropZone();if(s){const a=n.dragged;"move"===(null===(t=e.dataTransfer)||void 0===t?void 0:t.effectAllowed)?(null===(r=a.parentNode)||void 0===r||r.removeChild(a),a.style.opacity="",s.appendChild(a)):s.appendChild(a.cloneNode(!0));const d=s.lastChild;if(d){const t=s.getBoundingClientRect();d.setAttribute("action","move"),d.style.position="absolute",d.style.left=e.clientX-t.left+"px",d.style.top=e.clientY-t.top+"px",d.style.opacity="1.0";let r=null===(o=d.getElementsByTagName("ns-cube-sprite").item(0))||void 0===o?void 0:o.getAttribute("id");void 0===r&&(r=null===(i=d.getElementsByTagName("ns-pyramid-sprite").item(0))||void 0===i?void 0:i.getAttribute("id")),null==r&&(r=""),l.handleDrop(r,(e.clientX-t.left)/100,(e.clientY-t.top)/100)}}}handleDragOver(e){e.preventDefault(),this.slottedDropZone()}render(){return o`<slot></slot>`}};d.styles=e`
    :host {
      cursor: move;
    }
  `,t([s({type:String,attribute:"serial"})],d.prototype,"serial",void 0),t([s({type:String,attribute:"type"})],d.prototype,"type",void 0),d=a=t([i("ns-device-dropzone")],d);
