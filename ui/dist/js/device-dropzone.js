import{__decorate as e}from"../node_modules/tslib/tslib.es6.js";import{css as t,LitElement as r,html as o}from"https://cdn.jsdelivr.net/gh/lit/dist@2/core/lit-core.min.js";import{property as i,customElement as s}from"https://cdn.skypack.dev/pin/lit@v2.5.0-jYRq0AKQogjUdUh7SCAE/mode=imports/optimized/lit/decorators.js";import{DeviceDragZone as n}from"./device-dragzone.js";import{simulationState as d}from"./device-observer.js";var l;let a=l=class extends r{constructor(){super(),this.serial="",this.type="",this.addEventListener("drop",this.handleDrop),this.addEventListener("drag",this.handleDragOver),this.addEventListener("dragenter",l.handleDragEnter),this.addEventListener("dragleave",l.handleDragLeave),this.addEventListener("dragover",this.handleDragOver)}static handleDragEnter(e){e.preventDefault()}static handleDragLeave(e){e.preventDefault()}slottedDropZone(){var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("slot");return null==t?void 0:t.assignedElements({flatten:!0})[0]}handleDrop(e){var t,r,o,i;e.preventDefault();const s=this.slottedDropZone();if(s){const l=n.dragged;"move"===(null===(t=e.dataTransfer)||void 0===t?void 0:t.effectAllowed)?(null===(r=l.parentNode)||void 0===r||r.removeChild(l),l.style.opacity="",s.appendChild(l)):s.appendChild(l.cloneNode(!0));const a=s.lastChild;if(a){const t=s.getBoundingClientRect();a.setAttribute("action","move"),a.style.position="absolute",a.style.left=e.clientX-t.left+"px",a.style.top=e.clientY-t.top+"px",a.style.opacity="1.0";let r=null===(o=a.getElementsByTagName("ns-cube-sprite").item(0))||void 0===o?void 0:o.getAttribute("id");void 0===r&&(r=null===(i=a.getElementsByTagName("ns-pyramid-sprite").item(0))||void 0===i?void 0:i.getAttribute("id")),null==r&&(r=""),d.handleDrop(r,(e.clientX-t.left)/100,(e.clientY-t.top)/100)}}}handleDragOver(e){e.preventDefault(),this.slottedDropZone()}render(){return o`<slot></slot>`}};a.styles=t`
    :host {
      cursor: move;
    }
  `,e([i({type:String,attribute:"serial"})],a.prototype,"serial",void 0),e([i({type:String,attribute:"type"})],a.prototype,"type",void 0),a=l=e([s("ns-device-dropzone")],a);export{a as DeviceDropZone};
